version: "2.2"

services:
  anvil:
    container_name: anvil
    build: anvil
    ports: [ "8545:8545" ]

  alto:
    container_name: alto
    build: ../../
    ports: [ "3000:3000" ]
    command: --config config.localhost.json --rpcUrl http://anvil:8545
    depends_on:
      anvil:
        condition: service_started

  test_suite:
    container_name: test_suite
    build: test_suite
    environment:
      - ALTO_ENDPOINT=http://alto:3000
      - ANVIL_ENDPOINT=http://anvil:8545
    depends_on:
      alto:
        condition: service_started
